<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Services Demo - Multi-Step Onboarding</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'brand-blue': '#3B82F6',
                        'brand-gray': '#64748B',
                        'success-green': '#10B981',
                        'error-red': '#EF4444',
                        'bg-light': '#F8FAFC',
                        'text-dark': '#1E293B',
                    }
                }
            }
        };
    </script>
</head>
<body class="bg-bg-light font-inter min-h-screen">
    <!-- @COMPONENT: AppContainer -->
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-md">
            
            <!-- Progress Bar -->
            <!-- @COMPONENT: ProgressBar [currentStep, totalSteps] -->
            <div class="mb-8" id="progressContainer">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-brand-gray">Step <span id="currentStep">1</span> of 4</span>
                    <span class="text-sm text-brand-gray" id="progressPercentage">25%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="bg-brand-blue h-2 rounded-full transition-all duration-500 ease-out" id="progressBar" style="width: 25%"></div>
                </div>
            </div>
            <!-- @END_COMPONENT: ProgressBar -->

            <!-- Main Content Card -->
            <!-- @COMPONENT: ContentCard -->
            <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100">
                
                <!-- Screen 1: Email Input -->
                <!-- @COMPONENT: EmailScreen [onSubmit] -->
                <div id="emailScreen" class="screen-content">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 bg-brand-blue rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-envelope text-white text-xl"></i>
                        </div>
                        <h1 class="text-2xl font-bold text-text-dark mb-2">Welcome to SecureFinance</h1>
                        <p class="text-brand-gray">Enter your email address to get started with your secure financial dashboard</p>
                    </div>

                    <form id="emailForm" class="space-y-6">
                        <div>
                            <label for="email" class="block text-sm font-medium text-text-dark mb-2">Email Address</label>
                            <div class="relative">
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email"
                                    data-bind="user.email"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all duration-200 pl-12" 
                                    placeholder="Enter your email address"
                                    required
                                >
                                <i class="fas fa-envelope absolute left-4 top-1/2 transform -translate-y-1/2 text-brand-gray"></i>
                            </div>
                            <div id="emailError" class="mt-2 text-sm text-error-red hidden">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                <span>Please enter a valid email address</span>
                            </div>
                        </div>

                        <button 
                            type="submit" 
                            data-event="click:handleEmailSubmit"
                            class="w-full bg-brand-blue text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-brand-blue focus:ring-offset-2 transition-all duration-200 transform hover:scale-[1.02]">
                            Continue
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </form>
                </div>
                <!-- @END_COMPONENT: EmailScreen -->

                <!-- Screen 2: OTP Verification -->
                <!-- @COMPONENT: OTPScreen [email, onVerify] -->
                <div id="otpScreen" class="screen-content hidden">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 bg-success-green rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-shield-alt text-white text-xl"></i>
                        </div>
                        <h1 class="text-2xl font-bold text-text-dark mb-2">Verify Your Email</h1>
                        <p class="text-brand-gray">We've sent a 6-digit code to <span id="emailDisplay" class="font-medium text-text-dark">your email</span></p>
                    </div>

                    <form id="otpForm" class="space-y-6">
                        <div>
                            <label for="otp" class="block text-sm font-medium text-text-dark mb-2">Verification Code</label>
                            <input 
                                type="text" 
                                id="otp" 
                                name="otp"
                                maxlength="6"
                                data-bind="user.otp"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all duration-200 text-center text-2xl font-mono tracking-widest" 
                                placeholder="000000"
                                required
                            >
                            <div id="otpError" class="mt-2 text-sm text-error-red hidden">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                <span>Invalid verification code</span>
                            </div>
                        </div>

                        <button 
                            type="submit"
                            data-event="click:handleOTPVerify" 
                            class="w-full bg-brand-blue text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-brand-blue focus:ring-offset-2 transition-all duration-200">
                            Verify Code
                        </button>

                        <button 
                            type="button" 
                            class="w-full text-brand-blue font-medium py-2 hover:text-blue-700 transition-colors duration-200">
                            Resend Code
                        </button>
                    </form>
                </div>
                <!-- @END_COMPONENT: OTPScreen -->

                <!-- Screen 3: Progress/Setup -->
                <!-- @COMPONENT: ProgressScreen [setupSteps] -->
                <div id="progressScreen" class="screen-content hidden">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 bg-brand-blue rounded-full flex items-center justify-center mx-auto mb-4">
                            <div class="animate-spin">
                                <i class="fas fa-cog text-white text-xl"></i>
                            </div>
                        </div>
                        <h1 class="text-2xl font-bold text-text-dark mb-2">Setting Up Your Account</h1>
                        <p class="text-brand-gray">Please wait while we configure your secure financial dashboard</p>
                    </div>

                    <div class="space-y-4" id="setupSteps">
                        <!-- @MAP: setupSteps.map(step => ( -->
                        <div class="setup-step flex items-center p-4 bg-gray-50 rounded-lg" data-step="1">
                            <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center mr-4 step-indicator">
                                <i class="fas fa-check text-white text-sm hidden step-check"></i>
                                <div class="w-3 h-3 bg-white rounded-full step-dot"></div>
                            </div>
                            <div class="flex-1">
                                <div class="font-medium text-text-dark">Creating secure profile</div>
                                <div class="text-sm text-brand-gray">Initializing encryption protocols</div>
                            </div>
                        </div>

                        <div class="setup-step flex items-center p-4 bg-gray-50 rounded-lg" data-step="2">
                            <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center mr-4 step-indicator">
                                <i class="fas fa-check text-white text-sm hidden step-check"></i>
                                <div class="w-3 h-3 bg-white rounded-full step-dot"></div>
                            </div>
                            <div class="flex-1">
                                <div class="font-medium text-text-dark">Setting up dashboard</div>
                                <div class="text-sm text-brand-gray">Configuring personalized interface</div>
                            </div>
                        </div>

                        <div class="setup-step flex items-center p-4 bg-gray-50 rounded-lg" data-step="3">
                            <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center mr-4 step-indicator">
                                <i class="fas fa-check text-white text-sm hidden step-check"></i>
                                <div class="w-3 h-3 bg-white rounded-full step-dot"></div>
                            </div>
                            <div class="flex-1">
                                <div class="font-medium text-text-dark">Finalizing setup</div>
                                <div class="text-sm text-brand-gray">Preparing your financial tools</div>
                            </div>
                        </div>
                        <!-- @END_MAP )) -->
                    </div>
                </div>
                <!-- @END_COMPONENT: ProgressScreen -->

                <!-- Screen 4: Success -->
                <!-- @COMPONENT: SuccessScreen [userEmail, dashboardLink] -->
                <div id="successScreen" class="screen-content hidden">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-success-green rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-check text-white text-2xl"></i>
                        </div>
                        
                        <!-- Professional Logo Display -->
                        <div class="bg-white border border-gray-200 rounded-xl p-6 mb-6 shadow-sm">
                            <!-- Modern financial services logo placeholder -->
                            <div class="flex items-center justify-center mb-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-brand-blue to-blue-600 rounded-lg flex items-center justify-center mr-3">
                                    <i class="fas fa-chart-line text-white text-xl"></i>
                                </div>
                                <div class="text-2xl font-bold text-text-dark">SecureFinance</div>
                            </div>
                            <div class="text-sm text-brand-gray">Your trusted financial partner</div>
                        </div>

                        <h1 class="text-2xl font-bold text-text-dark mb-2">Welcome Aboard!</h1>
                        <p class="text-brand-gray mb-6">Your secure financial dashboard is ready. Access your personalized experience below.</p>
                    </div>

                    <!-- Dashboard Link Display -->
                    <div class="bg-gray-50 rounded-xl p-6 mb-6">
                        <div class="flex items-center justify-between mb-3">
                            <label class="text-sm font-medium text-text-dark">Your Dashboard Link</label>
                            <button 
                                id="copyLinkBtn"
                                data-event="click:copyDashboardLink"
                                class="text-brand-blue hover:text-blue-700 transition-colors duration-200">
                                <i class="fas fa-copy mr-1"></i>
                                <span class="text-sm">Copy</span>
                            </button>
                        </div>
                        <div class="bg-white border border-gray-200 rounded-lg p-3">
                            <div class="text-sm font-mono text-text-dark break-all" id="dashboardLink">
                                https://dashboard.securefinance.com/user/john.doe@email.com
                            </div>
                        </div>
                        <div id="copySuccess" class="mt-2 text-sm text-success-green hidden">
                            <i class="fas fa-check-circle mr-1"></i>
                            Link copied to clipboard!
                        </div>
                    </div>

                    <!-- Instructions -->
                    <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6">
                        <h3 class="font-medium text-text-dark mb-2">
                            <i class="fas fa-info-circle text-brand-blue mr-2"></i>
                            Getting Started
                        </h3>
                        <ul class="text-sm text-brand-gray space-y-1">
                            <li>• Bookmark your dashboard link for easy access</li>
                            <li>• Complete your profile setup for enhanced security</li>
                            <li>• Explore our comprehensive financial tools</li>
                        </ul>
                    </div>

                    <button 
                        class="w-full bg-brand-blue text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-brand-blue focus:ring-offset-2 transition-all duration-200 transform hover:scale-[1.02]">
                        Access Dashboard
                        <i class="fas fa-external-link-alt ml-2"></i>
                    </button>

                    <button 
                        type="button"
                        onclick="resetDemo()"
                        class="w-full mt-3 text-brand-gray hover:text-text-dark font-medium py-2 transition-colors duration-200">
                        <i class="fas fa-redo mr-2"></i>
                        Start Demo Again
                    </button>
                </div>
                <!-- @END_COMPONENT: SuccessScreen -->

            </div>
            <!-- @END_COMPONENT: ContentCard -->

        </div>
    </div>
    <!-- @END_COMPONENT: AppContainer -->

    <script>
        // TODO: Implement real API calls and state management
        (function() {
            'use strict';
            
            let currentStepNumber = 1;
            let userEmail = '';
            
            // Screen management
            function showScreen(screenId) {
                document.querySelectorAll('.screen-content').forEach(screen => {
                    screen.classList.add('hidden');
                });
                document.getElementById(screenId).classList.remove('hidden');
            }
            
            // Progress bar updates
            function updateProgress(step) {
                currentStepNumber = step;
                const percentage = (step / 4) * 100;
                
                document.getElementById('currentStep').textContent = step;
                document.getElementById('progressPercentage').textContent = percentage + '%';
                document.getElementById('progressBar').style.width = percentage + '%';
            }
            
            // Email form handling
            document.getElementById('emailForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const emailInput = document.getElementById('email');
                const email = emailInput.value.trim();
                const emailError = document.getElementById('emailError');
                
                // Basic email validation
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                
                if (!emailRegex.test(email)) {
                    emailError.classList.remove('hidden');
                    emailInput.classList.add('border-error-red');
                    return;
                }
                
                emailError.classList.add('hidden');
                emailInput.classList.remove('border-error-red');
                userEmail = email;
                
                // Update OTP screen with email
                document.getElementById('emailDisplay').textContent = email;
                
                // Move to OTP screen
                updateProgress(2);
                showScreen('otpScreen');
            });
            
            // OTP form handling
            document.getElementById('otpForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const otpInput = document.getElementById('otp');
                const otp = otpInput.value.trim();
                const otpError = document.getElementById('otpError');
                
                // Simulate OTP validation (accept any 6-digit code)
                if (otp.length !== 6 || !/^\d{6}$/.test(otp)) {
                    otpError.classList.remove('hidden');
                    otpInput.classList.add('border-error-red');
                    return;
                }
                
                otpError.classList.add('hidden');
                otpInput.classList.remove('border-error-red');
                
                // Move to progress screen
                updateProgress(3);
                showScreen('progressScreen');
                
                // Start setup simulation
                simulateSetup();
            });
            
            // Setup simulation with progress steps
            function simulateSetup() {
                const steps = document.querySelectorAll('.setup-step');
                let currentStep = 0;
                
                function completeStep(stepIndex) {
                    const step = steps[stepIndex];
                    const indicator = step.querySelector('.step-indicator');
                    const dot = step.querySelector('.step-dot');
                    const check = step.querySelector('.step-check');
                    
                    // Animation for completing step
                    indicator.classList.remove('bg-gray-300');
                    indicator.classList.add('bg-success-green');
                    dot.classList.add('hidden');
                    check.classList.remove('hidden');
                    
                    step.classList.remove('bg-gray-50');
                    step.classList.add('bg-green-50', 'border-success-green', 'border');
                }
                
                const setupInterval = setInterval(() => {
                    if (currentStep < steps.length) {
                        completeStep(currentStep);
                        currentStep++;
                    } else {
                        clearInterval(setupInterval);
                        
                        // Final step - show success screen
                        setTimeout(() => {
                            updateProgress(4);
                            
                            // Generate dashboard link with user email
                            const dashboardLinkElement = document.getElementById('dashboardLink');
                            dashboardLinkElement.textContent = 
                                `https://dashboard.securefinance.com/user/${userEmail}`;
                            
                            showScreen('successScreen');
                        }, 800);
                    }
                }, 1500);
            }
            
            // Copy dashboard link functionality
            document.getElementById('copyLinkBtn').addEventListener('click', function() {
                const dashboardLink = document.getElementById('dashboardLink').textContent;
                const copySuccess = document.getElementById('copySuccess');
                
                navigator.clipboard.writeText(dashboardLink).then(() => {
                    copySuccess.classList.remove('hidden');
                    setTimeout(() => {
                        copySuccess.classList.add('hidden');
                    }, 3000);
                }).catch(err => {
                    console.error('Could not copy text: ', err);
                });
            });
            
            // Reset demo function (global scope for button onclick)
            window.resetDemo = function() {
                currentStepNumber = 1;
                userEmail = '';
                
                // Reset all forms
                document.getElementById('emailForm').reset();
                document.getElementById('otpForm').reset();
                
                // Hide all error messages
                document.querySelectorAll('.text-error-red').forEach(error => {
                    error.classList.add('hidden');
                });
                
                // Reset input styling
                document.querySelectorAll('input').forEach(input => {
                    input.classList.remove('border-error-red');
                });
                
                // Reset setup steps
                document.querySelectorAll('.setup-step').forEach(step => {
                    const indicator = step.querySelector('.step-indicator');
                    const dot = step.querySelector('.step-dot');
                    const check = step.querySelector('.step-check');
                    
                    indicator.classList.remove('bg-success-green');
                    indicator.classList.add('bg-gray-300');
                    dot.classList.remove('hidden');
                    check.classList.add('hidden');
                    
                    step.classList.remove('bg-green-50', 'border-success-green', 'border');
                    step.classList.add('bg-gray-50');
                });
                
                // Reset progress and show first screen
                updateProgress(1);
                showScreen('emailScreen');
            };
            
            // OTP input formatting
            document.getElementById('otp').addEventListener('input', function(e) {
                // Only allow digits
                e.target.value = e.target.value.replace(/\D/g, '');
            });
            
        })();
    </script>
</body>
</html>